<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Curry</title>
</head>

<body>


    <script>
        var sendMsg = function (from, to, msg) {
            alert(["Hello " + to + ",", msg, "Sincerely,", "- " + from].join("\n"));
        };
        // sendMsg("feng", "fyg", "some message")
        // var sendMsgCurried = curry(sendMsg); // wish returns function(a,b,c)

        // var sendMsgFromJohnToBob = sendMsgCurried("Jhon")("Bob"); //wish returns function(c)

        // sendMsgFromJohnToBob("Come join the curry jsvascript!");


        function sub_curry(fn) {
            var args = [].slice.call(arguments, 1);
            return function () {
                return fn.apply(this, args.concat([].slice.call(arguments)));
            };
        }

        // var fn = function (a, b, c) {
        //     return [a, b, c]
        // }

        // console.log(fn("a", "b", "c"));

        // console.log(sub_curry(fn, "a")("b", "c"));
        // console.log(sub_curry(fn, "a", "b")("c"));
        // console.log(sub_curry(fn, "a", "b", "c")());



        function curry(fn, len) {
            len = len || fn.length;
            return function () {
                if (arguments.length < len) {
                    var combined = [fn].concat([].slice.call(arguments));
                    return len - arguments.length > 0 ?
                        curry(sub_curry.apply(this, combined), len - arguments.length) :
                        sub_curry.call(this, combined)
                } else {
                    return fn.apply(this, arguments)
                }
            }
        }


        var fn = curry(function (a, b, c) {
            return [a, b, c];
        });


        fn("F", "Y", "G");
        fn("F", "Y", "G");
        fn("F", "Y")("G");
        fn("F")("Y", "G");
        fn("F")("Y")("G");
    </script>
</body>

</html>